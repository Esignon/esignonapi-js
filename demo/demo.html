<html>
<head>
    <meta charset="utf-8"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <script src="esignonapi-js.js"></script>
    <script>
        let accessToken, clientId = '*7BC1F949E25EE7B3A59275F8AA126E248DA5BB01', companyId = 'jc400';
        document.addEventListener('DOMContentLoaded', function() {
            getEsignonAccessToken();
        }, false);

        /* 인증토큰 발급 */
        async function getEsignonAccessToken() {
            let res = await getAccessToken(clientId, companyId,'tkyoon@jcone.co.kr', '1212');
            console.log('res', res);
            
            //Success
            if(res.header.result_code == '00') {
                accessToken = res.body.access_token;
                console.log('accessToken', accessToken);
                startEsignonContract();

            //Fail
            } else {
                //TODO Something
                alert(res.header.result_msg);

            }
        }

        /* 비대면계약시작 */
        async function startEsignonContract() {

            //작성할 사람 설정
            let playerList = new Array();
            //playerList.push(new StartSimplePlayer('tkyoon@jcone.co.kr', '윤태경')); //기본
            // playerList.push(new StartSimplePlayer('tkyoon@jcone.co.kr', '윤태경', 'ko-KR', '01045552600')); //기본 + 휴대폰인증
            playerList.push(new StartSimplePlayer('tkyoon@jcone.co.kr', '', '', '12345', '힌트')); //기본 + 비밀번호인증

            //계약(문서) 전송
            let res = await startContract(accessToken, clientId, companyId, 'tkyoon@jcone.co.kr', '휴대폰 인증 계약서 제목이 들어갑니다.', '2870', playerList);

            //결과값
            console.log('res', res);
            
            //Success
            if(res.header.result_code == '00') {
                

            //Fail
            } else {
                //TODO Something

            }
        }

    </script>
</head>
<body>
    
</body>
</html>
